import face_recognition
import argparse
import os

# Tạo một trình phân tích cú pháp
parser = argparse.ArgumentParser()
parser.add_argument("-img1", help="Đường dẫn đến ảnh 1")
parser.add_argument("-img2", help="Đường dẫn đến ảnh 2")

# Phân tích các đối số từ dòng lệnh
args = parser.parse_args()

# Kiểm tra xem đã nhập đúng số lượng đối số hay chưa
if args.img1 is None or args.img2 is None:
    print("Bạn cần nhập đúng đường dẫn của cả hai ảnh.")
else:
    # Kiểm tra xem cả hai đường dẫn đều tồn tại
    if os.path.exists(args.img1) and os.path.exists(args.img2):
        # Tải và so sánh khuôn mặt từ hai ảnh
        image1 = face_recognition.load_image_file(args.img1)
        image2 = face_recognition.load_image_file(args.img2)

        # Kiểm tra xem có khuôn mặt trong ảnh 1 hay không
        face_encodings1 = face_recognition.face_encodings(image1)
        if not face_encodings1:
            print("Không tìm thấy khuôn mặt trong ảnh 1.")
        else:
            # Kiểm tra xem có khuôn mặt trong ảnh 2 hay không
            face_encodings2 = face_recognition.face_encodings(image2)
            if not face_encodings2:
                print("Không tìm thấy khuôn mặt trong ảnh 2.")
            else:
                # So sánh khuôn mặt
                matches = face_recognition.compare_faces(face_encodings1, face_encodings2)

                if matches[0]:
                    print("Khuôn mặt giống nhau.")
                else:
                    print("Khuôn mặt không giống nhau.")
    else:
        print("Một hoặc cả hai đường dẫn đến ảnh không tồn tại.")

